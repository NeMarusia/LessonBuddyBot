# LessonBuddyBot
Создание чат-бота, который будет собирать информацию
про замены преподавателей,
а так же умеющий считывать значение "дата", для отправки
куратору количества дней до замены, если не была нажата кнопка
со стороны куратора "замена найдена"

Функционал:
- сбор информации от пользователя (преподавателя) информации о замене:
  - дата замены
  - причина
  - группа, которую нужно подхватить 
- нотификация куратору о появившейся замене с таймером в день
  - уведомление о постановке задачи
  - повторное уведомление раз в сутки, если замена еще не найдена
  - отмена нотификации при нажатии кнопки "замена найдена"/"отмена занятия"
- возможность уведомления от пользователя, что замена не требуется?
- уведомление пользователя о том, что замена была найдена


## Схема БД 
dbml
Table settings {
  id integer [primary key]
  key varchar
  value varchar
}

Table swaps {
  id integer [primary key]
  group varchar
  lesson_date datetime
  reason text
  body text [note: 'Content of the post']
  user varchar
  status integer [note: ''0 - создан запрос на замену, 1 - замена в обработке, 2 - замена найдена, 3 - отмена занятия, 4 - отказ в замене, 5 - необходимость замены отпала, 21 - замена выставлена в ЛМС, 31 - группа уведомлена, 32 - занятие в лмс удалено']
  created_at datetime
  updated_at datatime
  details varchar
}

## Интерфейс преподавателя
После запуска бота появляется сообщение:

Привет! Если тебе необходима замена на занятие Олимпиадного отделения, пожалуйста, нажми кнопку "Нужна замена!"

Главное меню: 
- нужна замена!
- замена не нужна!
- Просмотр статусов замен

Если нажата "Нужна замена!"
1. Плашка "Выбери дату замены" (вводится дата)

2. Обновление плашки - "Напиши причину замены"

3. Обновление плашки - "напиши название группы, которой нужна замена"

4. Спасибо! Твой запрос отправлен куратору, ожидай ответа

5. Если куратор забрал задачу - Плашка "замена в обработке"

6. Если куратор нашел замену - "замена найдена" с уведомлением заменяющего преподавателя

7. Если куратор не нашел замену, но причина уважительная - "отмена занятия"

8. Если причина не уважительная - "отказ в замене"

9. При выставлении любого статуса препу уведомление

Если нажата "замена не нужна!"
1. Выводится сообщение Выбери замену, которая не нужна и список активных замен пользователя в виде списка кнопок
2. После выбора необходимо написать причину отмены замены
3. При установке этого статуса идет уведомление куратору

Копка "просмотр статусов замен":
1. Сообщение, в котором опубликован список "публичных" статусов замен с самими заменами


## Интерфейс куратора
Мои меню
- просмотреть активные замены с датами 
- при выборе замены следующее меню:
  - поменять статус "замена в обработке"
  - поменять статус "замена найдена" и возможностью внести note с фамилией заменяющего
  - поменять статус "отмена занятия"
  - поменять статус "отказано в замене" и причина
  - поменять статус "замена выставлена в ЛМС"
  - поменять статус "группа уведомлена"
  - поменять статус "занятие в лмс удалено"
- дайджест "замены на день" в 12:00 в будни. Если есть замены в выходные - напоминание накануне в 10 вечера
- напоминалки, если замены не выставлены за 3 часа, 1 час и за полчаса до занятия


## Технологический стек 
1. БД SQLite
2. Telegram client: pytelegrambotapi
3. Асинхронные события:celery
